<!DOCTYPE html >
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>This is a house</title>
    <div th:replace="fragments/head :: head"></div>
</head>
<body>
<div th:replace="fragments/header :: header">...</div>
<main class="container content">
    <h1>Diseases</h1>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages': ['table']});
        google.charts.setOnLoadCallback(drawTable);

        function drawTable() {
            var jsonData = $.ajax({
                url: "/api/disease",
                dataType: "json",
                async: false
            }).responseText;

            // Create our data table out of JSON data loaded from server.
            // var data = new google.visualization.Array(jsonData);

            var data = new google.visualization.DataTable();
            data.addColumn('string', 'crop');
            data.addColumn('string', 'disease');
            data.addColumn('number', 'rainfall');
            data.addColumn('number', 'temperature');
            data.addColumn('number', 'humidity');
            data.addColumn('number', 'radiation');
            data.addColumn('number', 'moisture');
            data.addColumn('number', 'windspeed');
            data.addColumn('string', 'symptom');
            data.addColumn('string', 'chemical');
            data.addColumn('number', 'price');

            jsonData = JSON.parse(jsonData);
            console.log(jsonData);
            for (var i = 0; i < jsonData.length; i++) {
                var deta = jsonData[i];
                var row = [deta.crop, deta.disease, deta.rainfall, deta.temperature, deta.humidity, deta.radiation,
                    deta.moisture, deta.windspeed, deta.symptom, deta.chemical, deta.price];
                console.log('deta', deta, row);
                data.addRow(row)
            }

            var table = new google.visualization.Table(document.getElementById('table_div'));

            table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});
        }
    </script>
    <div id="table_div"></div>
</main>
<div th:replace="fragments/footer :: footer">...</div>
</body>
</html>